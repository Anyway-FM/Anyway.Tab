var successQuote=!1,onlineQuoteUrl="http://anyway-web.b0.upaiyun.com/anyway.quote/anyway.quote.json";updateQuote=function(e,a,t,o,s){$("p.quote").text(e),$("span.author").text(a),""!=o&&($("span.source").css("display","inline"),$("a.source-link").text(o),$(".source-episode").text(t),$("a.source-link").attr("href",s))};var localQuote=function(){$.getJSON("./json/local-quotes.json",function(e){var a=Math.round(Math.random()*(e.length-2))+1,t=e[a][0],o=e[a][1],s=e[a][2],n=e[a][3],c=e[a][4];updateQuote(o,t,s,n,c)})},liveCheck=function(){$.getJSON(onlineQuoteUrl,function(e){successQuote=!0;var a=Math.round(Math.random()*(e.length-2))+1,t=e[a][0],o=e[a][1],s=e[a][2],n=e[a][3],c=e[a][4];updateQuote(o,t,s,n,c),$("footer").css("display","block"),$(".latest-link").attr("href",e[0][2]),$(".latest-episode").text(e[0][0]),$(".latest-title").text(e[0][1]);var r=new Date;nowDays=countDays($.format.date(r,"yyyy"),$.format.date(r,"M"),$.format.date(r,"d")),latestDays=countDays(e[0][3],e[0][4],e[0][5]);var l=nowDays-latestDays;displayDays=l<2?"更了！更了！终于更了！":l<3?"前两天刚上新！该满意了吧！":l<6?"Anyway.FM 最新一期是 "+l+" 天前更新的哟":l<9?"下面这期已经发布一周了，我们的<a href='http://anyway.fm/post/'>安妮薇邮报</a>应该快发行新一期了哟":l<11?"我也知道有快十天没更新了，求别催了！这上一期再随便听听吧！":l<12?"再等等……再等等，应该快更了……":l<16?"我知道你等不及了……这次他俩肯定又偷懒了":l<21?"这都快三个礼拜了，等不及了可以<a href='mailto:hello@anyway.fm'>发邮件</a>给他们问问看":l<60?"距离上次更新整整 "+l+" 天了，JJ 和 Leon 难道已经挂了":"如果你能看到这条……很有可能天网已经占领地球了……祝你好运吧",$(".days-between").html(displayDays),l<4&&$(".new-badge").css("display","inline")})};countDays=function(e,a,t){var o=365*(parseInt(e)-1);switch(parseInt(a)){case 1:o+=0;break;case 2:o+=31;break;case 3:o+=59;break;case 4:o+=90;break;case 5:o+=120;break;case 6:o+=151;break;case 7:o+=181;break;case 8:o+=212;break;case 9:o+=243;break;case 10:o+=273;break;case 11:o+=304;break;case 12:o+=334}return o+=parseInt(t),console.log(o),o},setTimeout(function(){successQuote||(localQuote(),console.log("Load Local Quote"))},700),$(window).load(function(){liveCheck()});